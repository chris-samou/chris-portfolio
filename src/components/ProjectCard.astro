---
import Icon from "./Icon.astro";
interface Props {
  title: string;
  description: string;
  image: string;
  tags: string[];
  liveUrl?: string;
  repoUrl?: string;
  type?: string;
}
const {
  title,
  description,
  image,
  tags,
  liveUrl,
  repoUrl,
  type = "personal",
} = Astro.props;
---

<article
  class="relative bg-background border border-muted/50 rounded-lg shadow-sm overflow-hidden h-full flex flex-col group hover:border-primary/50 hover:shadow-lg transition-all duration-300"
  aria-label={`Project card: ${title}`}
>
  <span
    class={`absolute top-4 right-4 px-2 py-0.5 rounded-full text-xs font-semibold select-none ${
      type === "work"
        ? "bg-blue-100 text-blue-800"
        : "bg-green-100 text-green-800"
    }`}
    aria-label={`Project type: ${type === "work" ? "Work" : "Personal"}`}
  >
    {type === "work" ? "Work" : "Personal"}
  </span>

  <a
    href={liveUrl ?? repoUrl}
    target="_blank"
    rel="noopener noreferrer"
    class="block overflow-hidden"
    aria-label={liveUrl
      ? `View live project: ${title}`
      : `View code repository: ${title}`}
  >
    <img
      src={image}
      alt={`Screenshot of ${title}`}
      class="w-full h-fit object-contain group-hover:scale-105 transition-transform duration-300 ease-in-out"
      loading="lazy"
      decoding="async"
      fetchpriority="low"
    />
  </a>

  <div class="p-6 flex flex-col flex-grow">
    <h3 class="text-xl font-bold mb-2 text-foreground">{title}</h3>
    <p class="text-muted-foreground mb-4 flex-grow">{description}</p>
    <div class="flex flex-wrap gap-2 mb-4">
      {
        tags.map((tag) => (
          <span
            class="text-xs font-semibold bg-primary/10 text-primary px-2 py-1 rounded-full select-none"
            aria-label={`Tag: ${tag}`}
          >
            {tag}
          </span>
        ))
      }
    </div>

    <div
      class="mt-auto flex justify-end items-center gap-6 pt-4 border-t border-muted/50 text-sm font-medium"
    >
      {
        liveUrl && (
          <a
            href={liveUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="group flex items-center gap-2 relative text-muted-foreground hover:text-primary cursor-pointer"
          >
            <span class="relative">
              View Project
              <span
                aria-hidden="true"
                class="absolute left-0 bottom-0 h-[2px] bg-primary w-0 group-hover:w-full transition-all duration-300 ease-out"
              />
            </span>
            <Icon
              name="arrow"
              class="w-4 h-4 transition-transform duration-300 ease-in-out transform group-hover:scale-110"
            />
          </a>
        )
      }

      {
        repoUrl && (
          <a
            href={repoUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="group flex items-center gap-2 relative text-muted-foreground hover:text-primary cursor-pointer"
          >
            <span class="relative">
              View Code
              <span
                aria-hidden="true"
                class="absolute left-0 bottom-0 h-[2px] bg-primary w-0 group-hover:w-full transition-all duration-300 ease-out"
              />
            </span>
            <Icon
              name="arrow"
              class="w-4 h-4 transition-transform duration-300 ease-in-out transform group-hover:scale-110"
            />
          </a>
        )
      }
    </div>
  </div>
</article>
